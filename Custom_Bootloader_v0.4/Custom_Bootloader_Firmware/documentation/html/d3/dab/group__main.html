<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bootloader Firmware: Main module</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Bootloader Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Main module</div></div>
</div><!--header-->
<div class="contents">

<p>This is the Main Module, which is where the main part of the application of the whole code is executed.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga997e88a0cb9ae207a84b6530c6e3b876"><td class="memItemLeft" align="right" valign="top"><a id="ga997e88a0cb9ae207a84b6530c6e3b876" name="ga997e88a0cb9ae207a84b6530c6e3b876"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BOOTLOADER_FIRMWARE_ADDRESS</b>&#160;&#160;&#160;(ETX_BL_FLASH_ADDR)</td></tr>
<tr class="memdesc:ga997e88a0cb9ae207a84b6530c6e3b876"><td class="mdescLeft">&#160;</td><td class="mdescRight">Designated Memory Location address for the Bootloader Firmware. <br /></td></tr>
<tr class="separator:ga997e88a0cb9ae207a84b6530c6e3b876"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga134014088cfa10c6aebf3ae071d8e03a"><td class="memItemLeft" align="right" valign="top"><a id="ga134014088cfa10c6aebf3ae071d8e03a" name="ga134014088cfa10c6aebf3ae071d8e03a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>APLICATION_FIRMWARE_ADDRESS</b>&#160;&#160;&#160;(ETX_APP_FLASH_ADDR)</td></tr>
<tr class="memdesc:ga134014088cfa10c6aebf3ae071d8e03a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Designated Memory Location address for the Application Firmware. <br /></td></tr>
<tr class="separator:ga134014088cfa10c6aebf3ae071d8e03a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafbf915c8667a0152cc3eeb97ed85dc39"><td class="memItemLeft" align="right" valign="top"><a id="gafbf915c8667a0152cc3eeb97ed85dc39" name="gafbf915c8667a0152cc3eeb97ed85dc39"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>APPLICATION_FIRMWARE_RESET_HANDLER_ADDRESS</b>&#160;&#160;&#160;(<a class="el" href="../../d3/dab/group__main.html#ga134014088cfa10c6aebf3ae071d8e03a">APLICATION_FIRMWARE_ADDRESS</a> + 4U)</td></tr>
<tr class="memdesc:gafbf915c8667a0152cc3eeb97ed85dc39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Designated Memory Location address for the Reset Handler of the Application Firmware. <br /></td></tr>
<tr class="separator:gafbf915c8667a0152cc3eeb97ed85dc39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5790efbdeeb252c0c2eea75abcedfadb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#ga5790efbdeeb252c0c2eea75abcedfadb">GPIO_MCU_LED1_Pin</a>&#160;&#160;&#160;(GPIO_PIN_13)</td></tr>
<tr class="memdesc:ga5790efbdeeb252c0c2eea75abcedfadb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Label for Pin PC13 in Output Mode, which is the Green LED1 of our MCU that the <a class="el" href="../../d3/dab/group__main.html">Main module</a> module will use in its program for indicating to the user whenever our MCU/MPU gets a software error or not.  <br /></td></tr>
<tr class="separator:ga5790efbdeeb252c0c2eea75abcedfadb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae56ed3f67cf0aa7b36af259ba6d59a64"><td class="memItemLeft" align="right" valign="top"><a id="gae56ed3f67cf0aa7b36af259ba6d59a64" name="gae56ed3f67cf0aa7b36af259ba6d59a64"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>GPIO_is_hm10_default_settings_Port</b>&#160;&#160;&#160;((GPIO_TypeDef *) GPIOC)</td></tr>
<tr class="memdesc:gae56ed3f67cf0aa7b36af259ba6d59a64"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO_TypeDef Type of the GPIO Port towards which the Input Mode GPIO Pin PC14 will be used so that our MCU can know whether the user wants it to set the default configuration settings in the HM-10 BT Device or not. <br /></td></tr>
<tr class="separator:gae56ed3f67cf0aa7b36af259ba6d59a64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7a929513ed85bf8b6a636218f5e0fade"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#ga7a929513ed85bf8b6a636218f5e0fade">GPIO_is_hm10_default_settings_Pin</a>&#160;&#160;&#160;(GPIO_PIN_14)</td></tr>
<tr class="memdesc:ga7a929513ed85bf8b6a636218f5e0fade"><td class="mdescLeft">&#160;</td><td class="mdescRight">Label for the GPIO Pin 14 towards which the GPIO Pin PC14 in Input Mode is at, which is used so that our MCU can know whether the user wants it to set the default configuration settings in the HM-10 BT Device or not.  <br /></td></tr>
<tr class="separator:ga7a929513ed85bf8b6a636218f5e0fade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga877cce34f3e58fd7f9194fab90724cb8"><td class="memItemLeft" align="right" valign="top"><a id="ga877cce34f3e58fd7f9194fab90724cb8" name="ga877cce34f3e58fd7f9194fab90724cb8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAJOR</b>&#160;&#160;&#160;(0)</td></tr>
<tr class="memdesc:ga877cce34f3e58fd7f9194fab90724cb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Major version number of our MCU/MPU's Bootloader Firmware. <br /></td></tr>
<tr class="separator:ga877cce34f3e58fd7f9194fab90724cb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4e10915d93013542d442d78de0e02e9a"><td class="memItemLeft" align="right" valign="top"><a id="ga4e10915d93013542d442d78de0e02e9a" name="ga4e10915d93013542d442d78de0e02e9a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MINOR</b>&#160;&#160;&#160;(4)</td></tr>
<tr class="memdesc:ga4e10915d93013542d442d78de0e02e9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minor version number of our MCU/MPU's Bootloader Firmware. <br /></td></tr>
<tr class="separator:ga4e10915d93013542d442d78de0e02e9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga70af21c671abfcc773614a9a4f63d920"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#ga70af21c671abfcc773614a9a4f63d920">SystemClock_Config</a> (void)</td></tr>
<tr class="memdesc:ga70af21c671abfcc773614a9a4f63d920"><td class="mdescLeft">&#160;</td><td class="mdescRight">System Clock Configuration.  <br /></td></tr>
<tr class="separator:ga70af21c671abfcc773614a9a4f63d920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae89fdd15729ad41a66911190fcbab23a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#gae89fdd15729ad41a66911190fcbab23a">MX_GPIO_Init</a> (void)</td></tr>
<tr class="memdesc:gae89fdd15729ad41a66911190fcbab23a"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO Initialization Function.  <br /></td></tr>
<tr class="separator:gae89fdd15729ad41a66911190fcbab23a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62f4b77e20bccafe98a183771749c20c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#ga62f4b77e20bccafe98a183771749c20c">MX_USART1_UART_Init</a> (void)</td></tr>
<tr class="memdesc:ga62f4b77e20bccafe98a183771749c20c"><td class="mdescLeft">&#160;</td><td class="mdescRight">USART1 Initialization Function.  <br /></td></tr>
<tr class="separator:ga62f4b77e20bccafe98a183771749c20c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6db1014d713f6f5c0f52a13299ee0733"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#ga6db1014d713f6f5c0f52a13299ee0733">MX_USART2_UART_Init</a> (void)</td></tr>
<tr class="memdesc:ga6db1014d713f6f5c0f52a13299ee0733"><td class="mdescLeft">&#160;</td><td class="mdescRight">USART2 Initialization Function.  <br /></td></tr>
<tr class="separator:ga6db1014d713f6f5c0f52a13299ee0733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c98cc38e233c6b46ca2bf9598a5fce8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#ga1c98cc38e233c6b46ca2bf9598a5fce8">MX_USART3_UART_Init</a> (void)</td></tr>
<tr class="memdesc:ga1c98cc38e233c6b46ca2bf9598a5fce8"><td class="mdescLeft">&#160;</td><td class="mdescRight">USART3 Initialization Function.  <br /></td></tr>
<tr class="separator:ga1c98cc38e233c6b46ca2bf9598a5fce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabcd33b312a28d1515d7b885a09e39056"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#gabcd33b312a28d1515d7b885a09e39056">custom_firmware_update_config_init</a> (void)</td></tr>
<tr class="memdesc:gabcd33b312a28d1515d7b885a09e39056"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> sub-module and then loads the latest data that has been written into it, if there is any. However, in the case that any of these processes fail, then this function will endlessly loop via a <code>while()</code> function and set the <a class="el" href="../../d3/dab/group__main.html#ga5790efbdeeb252c0c2eea75abcedfadb">GPIO_MCU_LED1_Pin</a> to GPIO_PIN_RESET state.  <br /></td></tr>
<tr class="separator:gabcd33b312a28d1515d7b885a09e39056"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga633fd0a21402454e50509acecc91b039"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#ga633fd0a21402454e50509acecc91b039">custom_init_etx_ota_protocol_module</a> (<a class="el" href="../../dd/dff/group__bl__side__etx__ota.html#ga58edd4e3b286229ad030c1c2f7af0a90">ETX_OTA_hw_Protocol</a> hw_protocol, UART_HandleTypeDef *<a class="el" href="../../dd/dff/group__bl__side__etx__ota.html#ga89654158a1ad435ead0c6985c85b1932">p_huart</a>)</td></tr>
<tr class="memdesc:ga633fd0a21402454e50509acecc91b039"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the <a class="el" href="../../dd/dff/group__bl__side__etx__ota.html">Firmware Update module</a> with a desired Hardware Protocol and, only in the case that the initialization is unsuccessful, then this function will endlessly loop via a <code>while()</code> function and set the <a class="el" href="../../d3/dab/group__main.html#ga5790efbdeeb252c0c2eea75abcedfadb">GPIO_MCU_LED1_Pin</a> to GPIO_PIN_RESET state.  <br /></td></tr>
<tr class="separator:ga633fd0a21402454e50509acecc91b039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9bfa3dd4fef9b9aa815c6145381325d9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#ga9bfa3dd4fef9b9aa815c6145381325d9">validate_bootloader_firmware</a> (void)</td></tr>
<tr class="memdesc:ga9bfa3dd4fef9b9aa815c6145381325d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validates the CRC of our MCU/MPU's current Bootloader Firmware and, only in the case that the Bootloader Firmware is not valid or is corrupted, then this function will endlessly loop via a <code>while()</code> function and set the <a class="el" href="../../d3/dab/group__main.html#ga5790efbdeeb252c0c2eea75abcedfadb">GPIO_MCU_LED1_Pin</a> to GPIO_PIN_RESET state.  <br /></td></tr>
<tr class="separator:ga9bfa3dd4fef9b9aa815c6145381325d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9e64c186119d18ce2a26b4df54f75dd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#gae9e64c186119d18ce2a26b4df54f75dd">validate_application_firmware</a> (uint8_t *is_app_fw_validation_ok)</td></tr>
<tr class="memdesc:gae9e64c186119d18ce2a26b4df54f75dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validates the CRC of our MCU/MPU's current Application Firmware.  <br /></td></tr>
<tr class="separator:gae9e64c186119d18ce2a26b4df54f75dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6812028b76e97ca8b7ac14de77568da5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#ga6812028b76e97ca8b7ac14de77568da5">HAL_uart_rx_flush</a> (UART_HandleTypeDef *<a class="el" href="../../dd/dff/group__bl__side__etx__ota.html#ga89654158a1ad435ead0c6985c85b1932">p_huart</a>)</td></tr>
<tr class="memdesc:ga6812028b76e97ca8b7ac14de77568da5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flushes the Rx of a desired UART.  <br /></td></tr>
<tr class="separator:ga6812028b76e97ca8b7ac14de77568da5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacafedc0813afcec11b7ead2ffddcaf64"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#gacafedc0813afcec11b7ead2ffddcaf64">goto_application_firmware</a> (void)</td></tr>
<tr class="memdesc:gacafedc0813afcec11b7ead2ffddcaf64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes our MCU/MPU to jump into its Application Firmware.  <br /></td></tr>
<tr class="separator:gacafedc0813afcec11b7ead2ffddcaf64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#ga840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:ga840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">The application entry point.  <br /></td></tr>
<tr class="separator:ga840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabac7707b6be5733e890091048fcb99a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#gabac7707b6be5733e890091048fcb99a2">fputc</a> (int ch, FILE *f)</td></tr>
<tr class="memdesc:gabac7707b6be5733e890091048fcb99a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compiler definition to be able to use the printf function from stdio.h library in order to print characters via the UART1 Peripheral but by using that printf function.  <br /></td></tr>
<tr class="separator:gabac7707b6be5733e890091048fcb99a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1730ffe1e560465665eb47d9264826f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dab/group__main.html#ga1730ffe1e560465665eb47d9264826f9">Error_Handler</a> (void)</td></tr>
<tr class="memdesc:ga1730ffe1e560465665eb47d9264826f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is executed in case of error occurrence.  <br /></td></tr>
<tr class="separator:ga1730ffe1e560465665eb47d9264826f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga2cf715bef37f7e8ef385a30974a5f0d5"><td class="memItemLeft" align="right" valign="top"><a id="ga2cf715bef37f7e8ef385a30974a5f0d5" name="ga2cf715bef37f7e8ef385a30974a5f0d5"></a>
UART_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><b>huart1</b></td></tr>
<tr class="separator:ga2cf715bef37f7e8ef385a30974a5f0d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa9479c261d65eecedd3d9582f7f0f89c"><td class="memItemLeft" align="right" valign="top"><a id="gaa9479c261d65eecedd3d9582f7f0f89c" name="gaa9479c261d65eecedd3d9582f7f0f89c"></a>
UART_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><b>huart2</b></td></tr>
<tr class="separator:gaa9479c261d65eecedd3d9582f7f0f89c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab7c63c1b0f65db92b6a4ea19edf957e1"><td class="memItemLeft" align="right" valign="top"><a id="gab7c63c1b0f65db92b6a4ea19edf957e1" name="gab7c63c1b0f65db92b6a4ea19edf957e1"></a>
UART_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><b>huart3</b></td></tr>
<tr class="separator:gab7c63c1b0f65db92b6a4ea19edf957e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga24983bb1a19222fc6f759f6719862164"><td class="memItemLeft" align="right" valign="top"><a id="ga24983bb1a19222fc6f759f6719862164" name="ga24983bb1a19222fc6f759f6719862164"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>BL_version</b> [2] = {<a class="el" href="../../d3/dab/group__main.html#ga877cce34f3e58fd7f9194fab90724cb8">MAJOR</a>, <a class="el" href="../../d3/dab/group__main.html#ga4e10915d93013542d442d78de0e02e9a">MINOR</a>}</td></tr>
<tr class="memdesc:ga24983bb1a19222fc6f759f6719862164"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global array variable used to hold the Major and Minor version number of our MCU/MPU's Bootloader Firmware in the 1st and 2nd byte respectively. <br /></td></tr>
<tr class="separator:ga24983bb1a19222fc6f759f6719862164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f3bdee18d4eed855a3fba7663c60b2d"><td class="memItemLeft" align="right" valign="top"><a id="ga3f3bdee18d4eed855a3fba7663c60b2d" name="ga3f3bdee18d4eed855a3fba7663c60b2d"></a>
<a class="el" href="../../d7/d98/structfirmware__update__config__data__t.html">firmware_update_config_data_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>fw_config</b></td></tr>
<tr class="memdesc:ga3f3bdee18d4eed855a3fba7663c60b2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global struct used to either pass to it the data that we want to write into the designated Flash Memory pages of the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> sub-module or, in the case of a read request, where that sub-module will write the latest data contained in the sub-module. <br /></td></tr>
<tr class="separator:ga3f3bdee18d4eed855a3fba7663c60b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga078a3abaad09cd25cc49921bb926e4ab"><td class="memItemLeft" align="right" valign="top"><a id="ga078a3abaad09cd25cc49921bb926e4ab" name="ga078a3abaad09cd25cc49921bb926e4ab"></a>
static <a class="el" href="../../dd/db4/struct_h_m10___g_p_i_o__def__t.html">HM10_GPIO_def_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>GPIO_is_hm10_default_settings</b></td></tr>
<tr class="memdesc:ga078a3abaad09cd25cc49921bb926e4ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable that will to hold the GPIO pin parameters of the Input Mode GPIO Pin to be used so that our MCU can know whether the user wants it to set the default configuration settings in the HM-10 BT Device or not. <br /></td></tr>
<tr class="separator:ga078a3abaad09cd25cc49921bb926e4ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This is the Main Module, which is where the main part of the application of the whole code is executed. </p>
<p>The purpose of this module is to provide a code template for any general purpose Bootloader that is desired to be developed for an STM32 MCU/MPU in which such a template already provides the code to manage and handle Firmware Updates via the Mortrack's ETX OTA Protocol which uses the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> .</p>
<dl class="section note"><dt>Note</dt><dd>This <a class="el" href="../../d3/dab/group__main.html">Main module</a> template is actually functioning as a Bootloader Firmware, which has an Application Firmware counterpart that should be located in an independent project to this, but that should be located just next to the root folder where this <a class="el" href="../../d3/dab/group__main.html">Main module</a> project's File Path is located at.</dd></dl>
<p>The logic contemplated in this <a class="el" href="../../d3/dab/group__main.html">Main module</a> template assumes that either Bootloader or Application Firmware Updates will be requested to this <a class="el" href="../../d3/dab/group__main.html">Main module</a> program. The way that this will work is that if this <a class="el" href="../../d3/dab/group__main.html">Main module</a> program receives a Bootloader Firmware Image via the ETX OTA Protocol made by Mortrack, then it will temporarily store it into the Flash Memory designated to the Application Firmware (i.e., at <a class="el" href="../../d3/dab/group__main.html#ga134014088cfa10c6aebf3ae071d8e03a">APLICATION_FIRMWARE_ADDRESS</a> ) and then it will reboot. After reboot, this <a class="el" href="../../d3/dab/group__main.html">Main module</a> program expects that there is another independent program (i.e., The Pre-Bootloader program) installed into our MCU/MPU that runs first and handles the installation of the temporarily stored Bootloader Firmware Image into the Flash Memory designated to the Bootloader Firmware (i.e., at <a class="el" href="../../d3/dab/group__main.html#ga997e88a0cb9ae207a84b6530c6e3b876">BOOTLOADER_FIRMWARE_ADDRESS</a> ) that was just mentioned. On the other hand, if an Application Firmware Image is received instead by this <a class="el" href="../../d3/dab/group__main.html">Main module</a> program, then this <a class="el" href="../../d3/dab/group__main.html">Main module</a> program will install it into the Flash Memory designated to the Application Firmware (i.e., at <a class="el" href="../../d3/dab/group__main.html#ga134014088cfa10c6aebf3ae071d8e03a">APLICATION_FIRMWARE_ADDRESS</a> ) and will then also reboot our MCU/MPU. However, if no Firmware Image Update is requested to our <a class="el" href="../../d3/dab/group__main.html">Main module</a> program for whatever the ETX_CUSTOM_HAL_TIMEOUT lasts, then our MCU/MPU will jump into whatever Application Firmware Image it has installed in it but only if its 32-bit CRC validation passes successfully. Otherwise, if there is no Application Firmware Image installed into our MCU/MPU, then the <a class="el" href="../../d3/dab/group__main.html">Main module</a> program will loop into waiting for a Firmware Image Update request from a host machine.</p>
<dl class="section note"><dt>Note</dt><dd>This <a class="el" href="../../d3/dab/group__main.html">Main module</a> program expects our MCU/MPU to have an Application Firmware counterpart that uses the ETX OTA Protocol made by Mortrack, which is where the implementer's actual application purpose for our MCU/MPU should lie on. </dd>
<dd>
In the case that the implementer desires to update either only the Bootloader or both the Bootloader and Application Firmwares of our MCU/MPU, then the order of the updates should strictly be first for the Bootloader and then the Application should be installed secondly. The reason for this lies in that if only the Bootloader is updated, then our MCU/MPU will lose its Application Firmware with which it was last working with, reason for which, whenever updating the Bootloader, then the Application Firmware should also be updated after that. On the other hand, if only the Application is desired to be updated, then this can be directly done and the MCU/MPU should maintain its current Bootloader Firmware intact but now with its new Application Firmware. </dd>
<dd>
Only for the first time you install this <a class="el" href="../../d3/dab/group__main.html">Main module</a> Bootloader program into your MCU/MPU, you must do this Firmware installation via the STM32 ST-LINK Utility application provided by the STMicroelectronics Team. In addition, you should also install the Pre-Bootloader (located at an independent project to <a class="el" href="../../d3/dab/group__main.html">Main module</a> , next to the root folder of the <a class="el" href="../../d3/dab/group__main.html">Main module</a> project File Path) also via the STM32 ST-LINK Utility app. After that, all the subsequent times that you want to install either an updated code of this <a class="el" href="../../d3/dab/group__main.html">Main module</a> Bootloader or an Application Firmware (Application Firmware template located at independent project to <a class="el" href="../../d3/dab/group__main.html">Main module</a> , next to the root folder of the <a class="el" href="../../d3/dab/group__main.html">Main module</a> project File Path), then they may now be made and should be made only via the ETX OTA Protocol made by Mortrack. This is strictly necessary for the Application Firmware because the Configuration Settings of the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> are changed whenever that happens and this is strictly required and expected by the Application Firmware Installations that uses the ETX OTA Protocol.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Cesar Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>February 09, 2024. </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga7a929513ed85bf8b6a636218f5e0fade" name="ga7a929513ed85bf8b6a636218f5e0fade"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7a929513ed85bf8b6a636218f5e0fade">&#9670;&#160;</a></span>GPIO_is_hm10_default_settings_Pin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GPIO_is_hm10_default_settings_Pin&#160;&#160;&#160;(GPIO_PIN_14)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Label for the GPIO Pin 14 towards which the GPIO Pin PC14 in Input Mode is at, which is used so that our MCU can know whether the user wants it to set the default configuration settings in the HM-10 BT Device or not. </p>
<p>The following are the possible values of this Pin:<br  />
<br  />
* 0 (i.e., Low State) = Do not reset/change the configuration settings of the HM-10 BT Device.<br  />
* 1 (i.e., High State) = User requests to reset the configuration settings of the HM-10 BT Device to its default settings. </p>

</div>
</div>
<a id="ga5790efbdeeb252c0c2eea75abcedfadb" name="ga5790efbdeeb252c0c2eea75abcedfadb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5790efbdeeb252c0c2eea75abcedfadb">&#9670;&#160;</a></span>GPIO_MCU_LED1_Pin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GPIO_MCU_LED1_Pin&#160;&#160;&#160;(GPIO_PIN_13)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Label for Pin PC13 in Output Mode, which is the Green LED1 of our MCU that the <a class="el" href="../../d3/dab/group__main.html">Main module</a> module will use in its program for indicating to the user whenever our MCU/MPU gets a software error or not. </p>
<p>The following are the output states to be taken into account:<br  />
<br  />
* 0 (i.e., Low State and also LED1 turned On) = MCU got a Software Error.<br  />
* 1 (i.e., High State and also LED1 turned Off) = MCU has no software error. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gabcd33b312a28d1515d7b885a09e39056" name="gabcd33b312a28d1515d7b885a09e39056"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabcd33b312a28d1515d7b885a09e39056">&#9670;&#160;</a></span>custom_firmware_update_config_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void custom_firmware_update_config_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> sub-module and then loads the latest data that has been written into it, if there is any. However, in the case that any of these processes fail, then this function will endlessly loop via a <code>while()</code> function and set the <a class="el" href="../../d3/dab/group__main.html#ga5790efbdeeb252c0c2eea75abcedfadb">GPIO_MCU_LED1_Pin</a> to GPIO_PIN_RESET state. </p>
<p>In case that all the processes conclude successfully, the latest data of the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> sub-module will be copied into the global struct <code>fw_config</code> .</p>
<p>A maximum of three attempts to initialize this module will be made, with a delay of 0.5 seconds each.</p>
<dl class="section author"><dt>Author</dt><dd>César Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>November 19, 2023 </dd></dl>
<p><b>Local variable ret:</b> Return value of a <a class="el" href="../../d7/d86/group__firmware__update__config.html#ga3c090c80e3e49b7cdeff014206874cbf">FirmUpdConf_Status</a> function type.</p>
<p><b>Local variable attempts:</b> Counter for the number of attempts to initialize the Firmware Update Configurations sub-module.</p>
<p><b>Local variable end_tick:</b> Defines the HAL Tick that our MCU/MPU needs to reach so that 0.5 seconds have passed with respect to each attempt to initialize the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> .</p>
<p><b>Local variable current_tick:</b> Current HAL Tick in our MCU/MPU.</p>

</div>
</div>
<a id="ga633fd0a21402454e50509acecc91b039" name="ga633fd0a21402454e50509acecc91b039"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga633fd0a21402454e50509acecc91b039">&#9670;&#160;</a></span>custom_init_etx_ota_protocol_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void custom_init_etx_ota_protocol_module </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/dff/group__bl__side__etx__ota.html#ga58edd4e3b286229ad030c1c2f7af0a90">ETX_OTA_hw_Protocol</a>&#160;</td>
          <td class="paramname"><em>hw_protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UART_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>p_huart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the <a class="el" href="../../dd/dff/group__bl__side__etx__ota.html">Firmware Update module</a> with a desired Hardware Protocol and, only in the case that the initialization is unsuccessful, then this function will endlessly loop via a <code>while()</code> function and set the <a class="el" href="../../d3/dab/group__main.html#ga5790efbdeeb252c0c2eea75abcedfadb">GPIO_MCU_LED1_Pin</a> to GPIO_PIN_RESET state. </p>
<p>This function creates and populate the fields of three structs required for initializing the <a class="el" href="../../dd/dff/group__bl__side__etx__ota.html">Firmware Update module</a> via the <a class="el" href="../../dd/dff/group__bl__side__etx__ota.html#ga637a094d9de8497dde307af1bb9fb61c">init_firmware_update_module</a> function. In the case where that function initializes the <a class="el" href="../../dd/dff/group__bl__side__etx__ota.html">Firmware Update module</a> successfully, then this <a class="el" href="../../d3/dab/group__main.html#gabcd33b312a28d1515d7b885a09e39056">custom_firmware_update_config_init</a> function will terminate. Otherwise, it will endlessly loop via a <code>while()</code> function and set the <a class="el" href="../../d3/dab/group__main.html#ga5790efbdeeb252c0c2eea75abcedfadb">GPIO_MCU_LED1_Pin</a> to GPIO_PIN_RESET state.</p>
<dl class="section note"><dt>Note</dt><dd>The <a class="el" href="../../d3/dab/group__main.html#ga3f3bdee18d4eed855a3fba7663c60b2d">fw_config</a> Global struct must have already been populated with the latest data written into the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> before calling this function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">hw_protocol</td><td>ETX OTA Hardware Protocol that is desired to enable whenever using the ETX OTA Protocol. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_huart</td><td>Pointer to the UART that wants to be used from our MCU/MPU as the means for using the chosen ETX OTA Hardware Protocol.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>César Miranda Meza </dd></dl>
<dl class="section date"><dt>Date</dt><dd>November 19, 2023 </dd></dl>
<p><b>Local variable ret:</b> Used to hold the exception code value returned by a <a class="el" href="../../dd/dff/group__bl__side__etx__ota.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> function type.</p>

</div>
</div>
<a id="ga1730ffe1e560465665eb47d9264826f9" name="ga1730ffe1e560465665eb47d9264826f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1730ffe1e560465665eb47d9264826f9">&#9670;&#160;</a></span>Error_Handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Error_Handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is executed in case of error occurrence. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gabac7707b6be5733e890091048fcb99a2" name="gabac7707b6be5733e890091048fcb99a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabac7707b6be5733e890091048fcb99a2">&#9670;&#160;</a></span>fputc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fputc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compiler definition to be able to use the printf function from stdio.h library in order to print characters via the UART1 Peripheral but by using that printf function. </p>
<dl class="section return"><dt>Returns</dt><dd>The <code>ch</code> param.</dd></dl>
<p>author César Miranda Meza </p><dl class="section date"><dt>Date</dt><dd>July 07, 2023 </dd></dl>

</div>
</div>
<a id="gacafedc0813afcec11b7ead2ffddcaf64" name="gacafedc0813afcec11b7ead2ffddcaf64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacafedc0813afcec11b7ead2ffddcaf64">&#9670;&#160;</a></span>goto_application_firmware()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void goto_application_firmware </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Makes our MCU/MPU to jump into its Application Firmware. </p>
<dl class="section author"><dt>Author</dt><dd>César Miranda Meza </dd></dl>
<dl class="section date"><dt>Date</dt><dd>July 16, 2023 </dd></dl>

</div>
</div>
<a id="ga6812028b76e97ca8b7ac14de77568da5" name="ga6812028b76e97ca8b7ac14de77568da5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6812028b76e97ca8b7ac14de77568da5">&#9670;&#160;</a></span>HAL_uart_rx_flush()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HAL_uart_rx_flush </td>
          <td>(</td>
          <td class="paramtype">UART_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>p_huart</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flushes the Rx of a desired UART. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_huart</td><td>Pointer towards the UART from which it is desired to flush its Rx.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Cesar Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>February 08, 2024. </dd></dl>
<p><b>Local variable ret:</b> HAL_StatusTypeDef Type variable used to hold the return value of a HAL function type.</p>
<p><b>Local variable buff:</b> uint8_t Type variable used to temporarily hold an available byte of data from the UART from which it is desired to flush its Rx.</p>

</div>
</div>
<a id="ga840291bc02cba5474a4cb46a9b9566fe" name="ga840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga840291bc02cba5474a4cb46a9b9566fe">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The application entry point. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>
<p><b>Local variable is_app_fw_validation_ok:</b> Flag used to indicate whether the Application Firmware has been successfully validated via its CRC with a <code>1</code> or, otherwise with a <code>0</code> .</p>
<p><b>Local variable end_tick:</b> Will hold the HAL Ticks that our MCU/MPU needs to reach so that 3 seconds have passed with respect to the moment that our MCU/MPU enters into DFU mode.</p>
<p><b>Local variable current_tick:</b> Current HAL Tick in our MCU/MPU.</p>
<p><b>Local variable ret:</b> Used to hold the exception code value returned by a <a class="el" href="../../dd/dff/group__bl__side__etx__ota.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> function type.</p>

</div>
</div>
<a id="gae89fdd15729ad41a66911190fcbab23a" name="gae89fdd15729ad41a66911190fcbab23a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae89fdd15729ad41a66911190fcbab23a">&#9670;&#160;</a></span>MX_GPIO_Init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MX_GPIO_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>GPIO Initialization Function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga62f4b77e20bccafe98a183771749c20c" name="ga62f4b77e20bccafe98a183771749c20c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga62f4b77e20bccafe98a183771749c20c">&#9670;&#160;</a></span>MX_USART1_UART_Init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MX_USART1_UART_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>USART1 Initialization Function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6db1014d713f6f5c0f52a13299ee0733" name="ga6db1014d713f6f5c0f52a13299ee0733"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6db1014d713f6f5c0f52a13299ee0733">&#9670;&#160;</a></span>MX_USART2_UART_Init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MX_USART2_UART_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>USART2 Initialization Function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1c98cc38e233c6b46ca2bf9598a5fce8" name="ga1c98cc38e233c6b46ca2bf9598a5fce8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1c98cc38e233c6b46ca2bf9598a5fce8">&#9670;&#160;</a></span>MX_USART3_UART_Init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MX_USART3_UART_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>USART3 Initialization Function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga70af21c671abfcc773614a9a4f63d920" name="ga70af21c671abfcc773614a9a4f63d920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga70af21c671abfcc773614a9a4f63d920">&#9670;&#160;</a></span>SystemClock_Config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemClock_Config </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>System Clock Configuration. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Initializes the RCC Oscillators according to the specified parameters in the RCC_OscInitTypeDef structure.</p>
<p>Initializes the CPU, AHB and APB buses clocks</p>

</div>
</div>
<a id="gae9e64c186119d18ce2a26b4df54f75dd" name="gae9e64c186119d18ce2a26b4df54f75dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9e64c186119d18ce2a26b4df54f75dd">&#9670;&#160;</a></span>validate_application_firmware()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void validate_application_firmware </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>is_app_fw_validation_ok</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validates the CRC of our MCU/MPU's current Application Firmware. </p>
<p>This function reads the data stored in the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> sub-module to get the recorded CRC of the Application Firmware and it calculates the CRC of the actual Application Firmware currently installed in our MCU/MPU. After this, both CRCs are used for validating our MCU/MPU's current Application Firmware.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">is_app_fw_validation_ok</td><td>Pointer to the Memory Location Address where the Flag value for used to indicate whether the Application Firmware has been successfully validated or not is located at. The possible valid values of this Flag are the following:<br  />
<br  />
 - 0 = There is either no Firmware Image installed at the designated Flash Memory of the Application Firmware or, if there is one, it either did not pass the 32-bit CRC validation or, a Bootloader Firmware was identified to be there.<br  />
<ul>
<li>1 = There is a valid Application Firmware Image installed at the designated Flash Memory of the Application Firmware.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>César Miranda Meza </dd></dl>
<dl class="section date"><dt>Date</dt><dd>November 19, 2023 </dd></dl>
<p><b>Local variable cal_crc:</b> Value holder for the calculated 32-bit CRC of our MCU/MPU's current Application Firmware.</p>

</div>
</div>
<a id="ga9bfa3dd4fef9b9aa815c6145381325d9" name="ga9bfa3dd4fef9b9aa815c6145381325d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9bfa3dd4fef9b9aa815c6145381325d9">&#9670;&#160;</a></span>validate_bootloader_firmware()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void validate_bootloader_firmware </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validates the CRC of our MCU/MPU's current Bootloader Firmware and, only in the case that the Bootloader Firmware is not valid or is corrupted, then this function will endlessly loop via a <code>while()</code> function and set the <a class="el" href="../../d3/dab/group__main.html#ga5790efbdeeb252c0c2eea75abcedfadb">GPIO_MCU_LED1_Pin</a> to GPIO_PIN_RESET state. </p>
<p>This function reads the data stored in the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> via the <a class="el" href="../../d3/dab/group__main.html#ga3f3bdee18d4eed855a3fba7663c60b2d">fw_config</a> Global struct to get the recorded CRC of the Bootloader Firmware and it calculates the CRC of the actual Bootloader Firmware currently installed in our MCU/MPU. After this, both CRCs are used for validating our MCU/MPU's current Bootloader Firmware. If both CRCs match or if there is no recorded CRC stored at the <a class="el" href="../../d3/dab/group__main.html#ga3f3bdee18d4eed855a3fba7663c60b2d">fw_config</a> Global struct, then this function will terminate. Otherwise, it will endlessly loop via a <code>while()</code> function and set the <a class="el" href="../../d3/dab/group__main.html#ga5790efbdeeb252c0c2eea75abcedfadb">GPIO_MCU_LED1_Pin</a> to GPIO_PIN_RESET state.</p>
<dl class="section note"><dt>Note</dt><dd>The <a class="el" href="../../d3/dab/group__main.html#ga3f3bdee18d4eed855a3fba7663c60b2d">fw_config</a> Global struct must have already been populated with the latest data written into the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> before calling this function.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>César Miranda Meza </dd></dl>
<dl class="section date"><dt>Date</dt><dd>November 19, 2023 </dd></dl>
<p><b>Local variable cal_crc:</b> Value holder for the calculated 32-bit CRC of our MCU/MPU's current Bootloader Firmware.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
