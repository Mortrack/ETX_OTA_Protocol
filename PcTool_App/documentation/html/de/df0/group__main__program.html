<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PcTool: An ETX OTA Firmware Update Library for hosts.: Main Program</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PcTool: An ETX OTA Firmware Update Library for hosts.
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Main Program</div></div>
</div><!--header-->
<div class="contents">

<p>This module contains the main application code.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df0/group__main__program.html#ga0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:ga0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function of the main application program whose purpose is to receive some ETX OTA Payload Data from the user via Command Line Arguments to then send it to a user specified device by using the ETX OTA Protocol.  <br /></td></tr>
<tr class="separator:ga0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This module contains the main application code. </p>
<p>The purpose of this application program is to receive some ETX OTA Payload Data from the user via Command Line Arguments to then send it to a user specified external device by using the ETX OTA Protocol.</p>
<dl class="section author"><dt>Author</dt><dd>Cesar Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>October 08, 2023. </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga0ddf1224851353fc92bfbff6f499fa97" name="ga0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0ddf1224851353fc92bfbff6f499fa97">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function of the main application program whose purpose is to receive some ETX OTA Payload Data from the user via Command Line Arguments to then send it to a user specified device by using the ETX OTA Protocol. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">argc</td><td>Contains the total number of Command Line Arguments that are given whenever executing the program contained in this file. The total number of arguments consider here will also include the command executed on the terminal window to run the program contained in this file. For example, if the Terminal Window Command used on the terminal window was <div class="fragment"><div class="line">$./a.out 0 1 2 </div>
</div><!-- fragment --> then <div class="fragment"><div class="line">argc = 4 </div>
</div><!-- fragment --> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td>Holds the actual Command Line Arguments that are given whenever executing the program contained in this file. Each argument will be allocated in a different index within the <code>argv</code> param, but were the first index will contain the command executed on the terminal window to run the program contained in this file and then the actual Command Line Arguments will be placed subsequently. For example, if the Terminal Window Command used on the terminal window was <div class="fragment"><div class="line">$./a.out 0 1 2 </div>
</div><!-- fragment --> then <div class="fragment"><div class="line">argv[4] = {<span class="stringliteral">&quot;./a.out&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>} </div>
</div><!-- fragment --></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This <a class="el" href="../../de/df0/group__main__program.html#ga0ddf1224851353fc92bfbff6f499fa97">main</a> function expects to be given the following Command Line Arguments via the <code>argv</code> param:<br  />
 <ul>
<li>
Command Line Argument index 0 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a58fe61957cb54e2d8de4c7b63e774638">TERMINAL_WINDOW_EXECUTION_COMMAND</a>  </li>
<li>
Command Line Argument index 1 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93ae05724b155f6ff2b36b97006c7183bac">COMPORT_NUMBER</a>  </li>
<li>
Command Line Argument index 2 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a90fc9939227d3d8d37e9665747cffd32">PAYLOAD_PATH</a>  </li>
<li>
Command Line Argument index 3 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#gaad7cbd91ee6a20a2e08a84fbd9ad04a7">ETX_OTA_Payload_t</a>  </li>
</ul>
</dd>
<dd>
Although this <a class="el" href="../../de/df0/group__main__program.html#ga0ddf1224851353fc92bfbff6f499fa97">main</a> function requires the user to always populate a value for the Command Line Argument 2, its value will only be used by this program whenever the value of the Command Line Argument index 3 is that of either a <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaad7cbd91ee6a20a2e08a84fbd9ad04a7ab59e55b93321baa7ed58e09083f16d54">ETX_OTA_Payload_t::ETX_OTA_Application_Firmware_Image</a> or a <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaad7cbd91ee6a20a2e08a84fbd9ad04a7a66e228175189f98b6cfbf7b8a6a9f768">ETX_OTA_Payload_t::ETX_OTA_Bootloader_Firmware_Image</a> . In addition, whenever the <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaad7cbd91ee6a20a2e08a84fbd9ad04a7a37335730e3318253ec79c6ba871ae90e">ETX_OTA_Payload_t::ETX_OTA_Custom_Data</a> type is given instead, then this program will send a fixed custom generated data that is formualted in the <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#gadddef2aa4f056c0700c6ef8064685a08">start_etx_ota_process</a> function.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ETX_OTA_EC_OK</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_ERR</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>CÃ©sar Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd>
<dd>
EmbeTronicX (<a href="https://github.com/Embetronicx/STM32-Bootloader/tree/ETX_Bootloader_3.0">STM32-Bootloader GitHub Repository under ETX_Bootloader_3.0 branch</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>November 24, 2023. </dd></dl>
<p><b>Local variable comport:</b> Should hold the actual comport that was requested by the user to be employed for the RS232 protocol.</p>
<p><b>Local variable firmware_image_path:</b> File Path towards the Firmware Update Image that the user requested to load and send to the desired MCU for it to install that Image to itself.</p>
<p><b>Local variable ETX_OTA_Payload_Type:</b> Used to hold the Payload Type that is to be given by the user.</p>
<p><b>Local variable ret:</b> Used to hold the exception code value returned by a <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> function type.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
